<!DOCTYPE html>
<html>
<head>

		





	    


	    

	
            <title>PostgreSQL HA with pgpool-II - Part 4 - Blog - Confluence</title>
	
        

                        
    
                        
    

            <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="/confluence">
<meta id="confluence-base-url" name="confluence-base-url" content="https://www.itenlight.com/confluence">

<meta id="atlassian-token" name="atlassian-token" content="1e90fcc9e91780346700d19951ab42a3e0659428">


<meta id="confluence-space-key" name="confluence-space-key" content="BLOG">
<script type="text/javascript">
        var contextPath = '/confluence';
</script>

    

    <meta name="confluence-request-time" content="1479214839951">
        
    
        
            <meta name="ajs-is-space-admin" content=""> <meta name="ajs-has-space-config" content="">
            <style>.ia-fixed-sidebar, .ia-splitter-left {width: 285px;}.theme-default .ia-splitter #main {margin-left: 285px;}.ia-fixed-sidebar {visibility: hidden;}</style>
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-discovered-plugin-features" content="$discoveredList">
            <meta name="stp-license-product-name" content="Confluence"/> <meta name="stp-license-days-to-expiry" content="178"/> <meta name="stp-license-is-admin" content="false"/> <meta name="stp-license-should-keep-banner-hidden" content="true"/>
            <meta name="ajs-keyboardshortcut-hash" content="e512dc1b82456f61e1e06fcb0a019072">
            <meta id="team-calendars-has-jira-link" content="true">
            <meta name="ajs-team-calendars-display-time-format" content="displayTimeFormat12">
            <meta id="team-calendars-display-week-number" content="false">
            <meta id="team-calendars-user-timezone" content="Europe/Belgrade">
            <script type="text/x-template" id="team-calendars-messages" title="team-calendars-messages"><fieldset class="i18n hidden"><input type="hidden" name="calendar3.month.long.july" value="July"><input type="hidden" name="calendar3.day.short.wednesday" value="Wed"><input type="hidden" name="calendar3.day.short.thursday" value="Thu"><input type="hidden" name="calendar3.month.short.march" value="Mar"><input type="hidden" name="calendar3.month.long.april" value="April"><input type="hidden" name="calendar3.month.long.october" value="October"><input type="hidden" name="calendar3.month.long.august" value="August"><input type="hidden" name="calendar3.month.short.july" value="Jul"><input type="hidden" name="calendar3.month.short.may" value="May"><input type="hidden" name="calendar3.month.short.november" value="Nov"><input type="hidden" name="calendar3.day.long.friday" value="Friday"><input type="hidden" name="calendar3.day.long.sunday" value="Sunday"><input type="hidden" name="calendar3.day.long.saturday" value="Saturday"><input type="hidden" name="calendar3.month.short.april" value="Apr"><input type="hidden" name="calendar3.day.long.wednesday" value="Wednesday"><input type="hidden" name="calendar3.month.long.december" value="December"><input type="hidden" name="calendar3.month.short.october" value="Oct"><input type="hidden" name="calendar3.day.long.monday" value="Monday"><input type="hidden" name="calendar3.month.short.june" value="Jun"><input type="hidden" name="calendar3.day.short.monday" value="Mon"><input type="hidden" name="calendar3.day.short.tuesday" value="Tue"><input type="hidden" name="calendar3.day.short.saturday" value="Sat"><input type="hidden" name="calendar3.month.long.march" value="March"><input type="hidden" name="calendar3.month.long.june" value="June"><input type="hidden" name="calendar3.month.short.february" value="Feb"><input type="hidden" name="calendar3.month.short.august" value="Aug"><input type="hidden" name="calendar3.month.short.december" value="Dec"><input type="hidden" name="calendar3.day.short.sunday" value="Sun"><input type="hidden" name="calendar3.month.long.february" value="February"><input type="hidden" name="calendar3.day.long.tuesday" value="Tuesday"><input type="hidden" name="calendar3.month.long.may" value="May"><input type="hidden" name="calendar3.month.long.september" value="September"><input type="hidden" name="calendar3.month.long.november" value="November"><input type="hidden" name="calendar3.month.short.january" value="Jan"><input type="hidden" name="calendar3.month.short.september" value="Sep"><input type="hidden" name="calendar3.day.long.thursday" value="Thursday"><input type="hidden" name="calendar3.month.long.january" value="January"><input type="hidden" name="calendar3.day.short.friday" value="Fri"></fieldset></script>
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            
    
    
            <meta name="ajs-page-id" content="3735611">
            <meta name="ajs-latest-page-id" content="3735611">
            <meta name="ajs-content-type" content="blogpost">
            <meta name="ajs-page-title" content="PostgreSQL HA with pgpool-II - Part 4">
            <meta name="ajs-parent-page-id" content="">
            <meta name="ajs-space-key" content="BLOG">
            <meta name="ajs-space-name" content="Blog">
            <meta name="ajs-jira-metadata-count" content="0">
            <meta name="ajs-context-path" content="/confluence">
            <meta name="ajs-base-url" content="https://www.itenlight.com/confluence">
            <meta name="ajs-version-number" content="5.9.10">
            <meta name="ajs-build-number" content="6218">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-remote-user-key" content="">
            <meta name="ajs-remote-user-has-licensed-access" content="false">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-static-resource-url-prefix" content="/confluence/s/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/_">
            <meta name="ajs-global-settings-attachment-max-size" content="104857600">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="applinks.v3.ui,confluence.wrap.macro.disable,clc.quick.create,confluence.view.edit.transition,cql.search.screen,confluence-inline-comments-resolved,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareContentEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.mentions.api.ConfluenceMentionEvent,nps.survey.inline.dialog,confluence.efi.onboarding.new.templates,notification.plugin.api.enabled.com.atlassian.confluence.event.events.security.ForgotPasswordEvent,pdf-preview,notification.plugin.api.enabled.com.atlassian.confluence.plugins.tasklist.event.SendTaskEmailEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageMovedEvent,previews.sharing,previews.versions,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentUpdateEvent,file-annotations,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.attachment.AttachmentBatchUploadCompletedEvent,confluence.efi.onboarding.rich.space.content,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentCreateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingLessUsersEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentRemoveEvent,confluence.wrap.macro,atlassian.aui.raphael.disabled,previews.conversion-service,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.follow.FollowEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageEditedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostCreateEvent,previews.trigger-all-file-types,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentResolveEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.like.LikeCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentCreateEvent,previews.sharing.pushstate,confluence-inline-comments-rich-editor,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostUpdateEvent,file-annotations.likes,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentMentionUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingNoSpaceCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.hipchat.api.events.HipChatUserMapped,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareAttachmentEvent,confluence-inline-comments,quick-reload-inline-comments-flags,confluence-inline-comments-dangling-comment,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostMovedEvent">
            <meta name="ajs-atl-token" content="1e90fcc9e91780346700d19951ab42a3e0659428">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="dd MMM yyyy">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="/confluence/s/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/_/favicon.ico">
    <link rel="icon" type="image/x-icon" href="/confluence/s/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/_/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="/confluence/opensearch/osd.action" title="Confluence"/>

<script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/confluence\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources.is-server-instance-data-provider"]="true";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:/confluence(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources.license-details"]="{\"daysBeforeLicenseExpiry\":0,\"daysBeforeMaintenanceExpiry\":0,\"showLicenseExpiryBanner\":false,\"showMaintenanceExpiryBanner\":false,\"renewUrl\":null,\"salesEmail\":null}";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:discovery-javascript-data.link-active"]="{\"linkActive\":false,\"conditionsMet\":true,\"admin\":false}";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:nps-acknowledgement-resources.analytics-enabled-data-provider"]="\"true\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:nps-acknowledgement-resources.sen-data-provider"]="\"SEN-7331437\"";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-feature-discovery-plugin:confluence-feature-discovery-plugin-resources.test-mode"]="false";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api.feature-data-provider"]="true";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api.rack-data-provider"]="\"\"";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common.applinks-context"]="{\"hostApplication\":{\"id\":\"88ebc2b4-1ec9-3912-8bef-6e77012a47e6\",\"type\":\"confluence\"}}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common.applinks-features"]="{\"BITBUCKET_REBRAND\":false,\"V3_UI_OPT_IN\":false,\"V3_UI\":false}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common.applinks-discovered-features"]="[]";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common.applinks-help-paths"]="{\"entries\":{\"applinks.docs.root\":\"https://confluence.atlassian.com/display/APPLINKS-050/\",\"applinks.docs.diagnostics.troubleshoot.sslunmatched\":\"SSL+and+application+link+troubleshooting+guide\",\"applinks.docs.diagnostics.troubleshoot.oauthtimestamprefused\":\"OAuth+troubleshooting+guide\",\"applinks.docs.delete.entity.link\":\"Create+links+between+projects\",\"applinks.docs.adding.application.link\":\"Link+Atlassian+applications+to+work+together\",\"applinks.docs.administration.guide\":\"Application+Links+Documentation\",\"applinks.docs.oauth.security\":\"OAuth+security+for+application+links\",\"applinks.docs.troubleshoot.application.links\":\"Troubleshoot+application+links\",\"applinks.docs.diagnostics.troubleshoot.unknownerror\":\"Network+and+connectivity+troubleshooting+guide\",\"applinks.docs.configuring.auth.trusted.apps\":\"Configuring+Trusted+Applications+authentication+for+an+application+link\",\"applinks.docs.diagnostics.troubleshoot.authlevelunsupported\":\"OAuth+troubleshooting+guide\",\"applinks.docs.diagnostics.troubleshoot.ssluntrusted\":\"SSL+and+application+link+troubleshooting+guide\",\"applinks.docs.diagnostics.troubleshoot.unknownhost\":\"Network+and+connectivity+troubleshooting+guide\",\"applinks.docs.delete.application.link\":\"Link+Atlassian+applications+to+work+together\",\"applinks.docs.link.applications\":\"Link+Atlassian+applications+to+work+together\",\"applinks.docs.diagnostics.troubleshoot.oauthproblem\":\"OAuth+troubleshooting+guide\",\"applinks.docs.relocate.application.link\":\"Link+Atlassian+applications+to+work+together\",\"applinks.docs.administering.entity.links\":\"Create+links+between+projects\",\"applinks.docs.upgrade.application.link\":\"OAuth+security+for+application+links\",\"applinks.docs.diagnostics.troubleshoot.connectionrefused\":\"Network+and+connectivity+troubleshooting+guide\",\"applinks.docs.configuring.auth.oauth\":\"OAuth+security+for+application+links\",\"applinks.docs.insufficient.remote.permission\":\"OAuth+security+for+application+links\",\"applinks.docs.configuring.application.link.auth\":\"OAuth+security+for+application+links\",\"applinks.docs.diagnostics\":\"Application+links+diagnostics\",\"applinks.docs.configured.authentication.types\":\"OAuth+security+for+application+links\",\"applinks.docs.adding.entity.link\":\"Create+links+between+projects\",\"applinks.docs.diagnostics.troubleshoot.unexpectedresponse\":\"Network+and+connectivity+troubleshooting+guide\",\"applinks.docs.configuring.auth.basic\":\"Configuring+Basic+HTTP+Authentication+for+an+Application+Link\",\"applinks.docs.diagnostics.troubleshoot.authlevelmismatch\":\"OAuth+troubleshooting+guide\"}}";
</script>
<link type="text/css" rel="stylesheet" href="/confluence/s/775249c1ad7a298a6b9a703040f09a72-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/80/_/download/superbatch/css/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/confluence/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/80/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/confluence/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/80/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/confluence/s/e1043264f3e70660da8480ec5aad97c9-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/47df700daed3c4f64dac392db18d0411/_/download/contextbatch/css/blogpost,viewcontent,atl.general,main,atl.comments/batch.css?confluence.view.edit.transition=true&amp;highlightactions=true&amp;custom-site-logo=true" media="all">
<link type="text/css" rel="stylesheet" href="/confluence/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/47df700daed3c4f64dac392db18d0411/_/download/contextbatch/css/blogpost,viewcontent,atl.general,main,atl.comments/batch.css?media=print" media="print">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/confluence/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/47df700daed3c4f64dac392db18d0411/_/download/contextbatch/css/blogpost,viewcontent,atl.general,main,atl.comments/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/confluence/s/90731515e1d37d44a291c7a04cec4f94-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/47df700daed3c4f64dac392db18d0411/_/download/contextbatch/css/blogpost,viewcontent,atl.general,main,atl.comments/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/confluence/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/5.0.9/_/download/batch/com.refinedwiki.confluence.plugins.theme.original:shared-batch/com.refinedwiki.confluence.plugins.theme.original:shared-batch.css" media="all">
<link type="text/css" rel="stylesheet" href="/confluence/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/5.0.9/_/download/batch/com.refinedwiki.confluence.plugins.theme.original:core-resources/com.refinedwiki.confluence.plugins.theme.original:core-resources.css" media="all">
<link type="text/css" rel="stylesheet" href="/confluence/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/5.0.9/_/download/batch/com.refinedwiki.confluence.plugins.theme.original:core-resources/com.refinedwiki.confluence.plugins.theme.original:core-resources.css?content-type=text%2Fcss&amp;media=print" media="print">
<link type="text/css" rel="stylesheet" href="/confluence/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/5.0.9/_/download/batch/com.refinedwiki.confluence.plugins.theme.original:batch/com.refinedwiki.confluence.plugins.theme.original:batch.css" media="all">
<link type="text/css" rel="stylesheet" href="/confluence/s/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/3/_/styles/colors.css?spaceKey=BLOG" media="all">
<link type="text/css" rel="stylesheet" href="/confluence/s/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/5.0.9/_/download/resources/com.refinedwiki.confluence.plugins.theme.original:RefinedWikiTheme50/default-theme.css" media="all">
<link type="text/css" rel="stylesheet" href="/confluence/s/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/3/_/styles/theme-colors.css?completeModuleKey=com.refinedwiki.confluence.plugins.theme.original%3ARefinedWikiTheme50&amp;stylesheetName=color-scheme.css&amp;spaceKey=BLOG" media="all">
<script type="text/javascript" src="/confluence/s/b5041722346a7574e2fdeb61b0309428-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/80/_/download/superbatch/js/batch.js?atlassian.aui.raphael.disabled=true&amp;locale=en-GB" ></script>
<script type="text/javascript" src="/confluence/s/fcca1b6fd9661f31dd050a7767db6cdb-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/47df700daed3c4f64dac392db18d0411/_/download/contextbatch/js/blogpost,viewcontent,atl.general,main,atl.comments/batch.js?confluence.view.edit.transition=true&amp;highlightactions=true&amp;build-number=6218&amp;nps-acknowledged=true&amp;analytics-enabled=true&amp;locale=en-GB&amp;anonymous-access-enabled=true&amp;is-server-instance=true&amp;nps-enabled=true&amp;hostenabled=true" ></script>
<script type="text/javascript" src="/confluence/s/6c0981174e94142364564819dc0d1413-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/5.0.9/_/download/batch/com.refinedwiki.confluence.plugins.theme.original:shared-batch/com.refinedwiki.confluence.plugins.theme.original:shared-batch.js?locale=en-GB" ></script>
<script type="text/javascript" src="/confluence/s/6c0981174e94142364564819dc0d1413-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/5.0.9/_/download/batch/com.refinedwiki.confluence.plugins.theme.original:core-resources/com.refinedwiki.confluence.plugins.theme.original:core-resources.js?locale=en-GB" ></script>
<script type="text/javascript" src="/confluence/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/6218/d2c5c255bb54cd737858a680a1ead2532cae5842.22/1.0/_/download/batch/confluence.web.resources:moment/confluence.web.resources:moment.js" ></script>

    
        
            <meta name="stp-license-product-name" content="Confluence"/> <meta name="stp-license-days-to-expiry" content="178"/> <meta name="stp-license-is-admin" content="false"/> <meta name="stp-license-should-keep-banner-hidden" content="true"/>
    

        


    

		








<script>
	
			if (typeof RW === 'undefined') {
    	var RW = {};
	}
	
		// Should not be used - but kept for third parties. Use RW.versionChecker instead.
	RW.confluenceVersion = 5.91;
    RW.versionChecker = {
	  comparedTo510: -1,
	  comparedTo59: 1,
	  comparedTo58: 1,
	  comparedTo57: 1
	};

		
	
		RW.isConfluenceAdministrator = false
	
				var contextPath = '/confluence';
	
					RW.scrollSearchActive = true;
	
            RW.blogPortalEnabled = true
    
		RW.userDashboardRedirection = true;
	
			
		var originalTheme = RW;
	
		RW.cacheSettings = {};
	RW.cacheSettings.params = {};
	RW.cacheSettings.lastChange = {}

	    
    		RW.cacheSettings.params['footer'] = true;
    	    		RW.cacheSettings.params['userdetails'] = true;
    	    		RW.cacheSettings.params['globalmenu'] = true;
    	    		RW.cacheSettings.params['usercategory'] = true;
    	    		RW.cacheSettings.params['category'] = true;
    	    		RW.cacheSettings.params['docache'] = false;
    	            			RW.cacheSettings.lastChange['footer'] = 1478237216427;
        			RW.cacheSettings.lastChange['userdetails'] = 1478237216427;
        			RW.cacheSettings.lastChange['globalmenu'] = 1478237216427;
        			RW.cacheSettings.lastChange['usercategory'] = 1478237216427;
        			RW.cacheSettings.lastChange['category'] = 1478514243951;
    	RW.activeCategoryKey = '';

  // Keyboard shortcuts add-on status
  RW.shortcutsEnabled = function() {
	return Confluence && Confluence.KeyboardShortcuts && Confluence.KeyboardShortcuts.enabled;
  }
</script>



	
				
	

<!--[if !IE]><!-->
 	<style type="text/css">
		.rw_toolbar_menu li .rw_toolbar_dropdown li a:hover
		{
			color: #ffffff;	
			background: #3572b0;
		}
		
		/* Scroll office fix */
		#com-k15t-confluence-scroll-pdf-launcher:hover
		{
			color: #ffffff;	
			background: #3572b0;
		}
	</style>
<!--<![endif]-->

		
<!--[if IE 6]>
	<link type="text/css" rel="stylesheet" href="/confluence/download/resources/com.refinedwiki.confluence.plugins.theme.original/styles/legacy/ie6-fix.css" media="all"/>
<![endif]-->

<!--[if IE 7]>
	<link type="text/css" rel="stylesheet" href="/confluence/download/resources/com.refinedwiki.confluence.plugins.theme.original/styles/legacy/ie7-fix.css" media="all"/>
<![endif]-->







			
		


            
            
            


            
            
            


            
            
            


            
            
            


            
            
                                                                                                                                                                                                                                    
            

	<link type="text/css" rel="stylesheet" href="/confluence/plugins/servlet/rw-resources/themes/2/css/theme-2-1.css" media="all">


			<style type="text/css">
  #rw_wrapper.rw_effects_popup_shadow .rw_shadow_top { width: calc(100% + 40px); }
  #rw_wrapper.rw_effects_popup_shadow .rw_shadow_top:after { width: calc(100% - 40px); }
  #rw_wrapper.rw_effects_popup_border .rw_shadow_top { width: calc(100% + 2px); }
</style>




<style type="text/css">
	/* Key navigation in popup */
	li.rw_selected a { background: #fd9602 !important; border-color: #fd9602 !important; }
	li.rw_selected * { color: #fff !important; }
	li.rw_selected a span.rw_item_left { background: none !important; border-color:none !important;}
	
	/* Key navigation category menu */
	#rw_category_menu ul li.rw_active.rw_selected a > span { border-color: #fd9602; }
	
	/* Key navigation for page tree */
	.rw_pagetree_list li.rw_selected > div.rw_icon_content { background: #fd9602 !important; border-color: #fd9602 !important; }
	.rw_pagetree_list li.rw_selected > div.rw_icon_content a { color:#fff !important;}
	.rw_pagetree_list li.rw_selected a {background: none !important; border-color: none; color:#333 !important;}
	
	/* Key navigation for activity popup */
	li.rw_selected div.rw_no_link { background: #fd9602 !important; border-color: #fd9602 !important; }
	
	/* Main Key Navigation */
	.rw_keynavigation_row > div.rw_selected { background: #fd9602 !important; color:#fff !important;}
	.rw_keynavigation_container > div.rw_keynavigation_empty_item { background: none;}
	
	/* Menu keynav exceptions */
	#notifications-anchor.rw_selected {background: #fd9602 !important; color:#fff !important;}
	
	
	

	#rw_menu_bar #rw_create_button .aui-button,
	#rw_inline_dialog_page_menu #rw_create_button .aui-button,
    .rw_create_blogpost_button.aui-button
	{
	  background-image: -moz-linear-gradient(top, #3572b0, #2d6195);
	  background-image: -ms-linear-gradient(top,  #3572b0, #2d6195);
	  background-image: -webkit-linear-gradient(top,  #3572b0, #2d6195);
	  background-image: -o-linear-gradient(top,  #3572b0, #2d6195);
	  background-image: linear-gradient(top,  #3572b0, #2d6195);
	  text-shadow: none;
	  color: #ffffff;
	}

    #rw_menu_bar #rw_create_button .aui-button,
    #rw_inline_dialog_page_menu #rw_create_button .aui-button,
    .rw_create_blogpost_button.aui-button
    {
      border-color: #3572b0;
    }
    #rw_main #rw_create_button .aui-button:hover,
    #rw_main #rw_create_button .aui-button:focus,
    #rw_inline_dialog_page_menu #rw_create_button .aui-button:hover,
    #rw_inline_dialog_page_menu #rw_create_button .aui-button:focus,
    .rw_create_blogpost_button.aui-button:hover,
    .rw_create_blogpost_button.aui-button:focus
    {
      background-image: -moz-linear-gradient(top, #3089e3, #31669b);
      background-image: -ms-linear-gradient(top, #3089e3, #31669b);
      background-image: -webkit-linear-gradient(top, #3089e3, #31669b);
      background-image: -o-linear-gradient(top, #3089e3, #31669b);
      background-image: linear-gradient(top, #3089e3, #31669b);
    }

    .rw_create_blogpost_button.aui-button {
	  border: 0;
    }
    .rw_create_blogpost_button.aui-button:hover {
      color: #ffffff;
	}

	
				
	
	
    	        #com-atlassian-confluence #inline-dialog-notifications-miniview
        {
            position:fixed;
            top: 57px !important;
            right: 80px !important;
			margin: 0px !important;
        }
        #com-atlassian-confluence #inline-dialog-notifications-miniview:after,
        #com-atlassian-confluence #inline-dialog-notifications-miniview:before
        {
            border: medium solid transparent;
            bottom: 100%;
            content: " ";
            height: 0;
            pointer-events: none;
            position: absolute;
            width: 0;
        }
        #com-atlassian-confluence #inline-dialog-notifications-miniview:after
        {
            
            border-color: rgba(237, 237, 237, 0) rgba(237, 237, 237, 0) rgba(237, 237, 237, 0) #fff;
            border-width: 8px;  
            top:22px;
            right: -15px;   
        }
        #com-atlassian-confluence #inline-dialog-notifications-miniview:before
        {
            border-color: rgba(221, 221, 221, 0) rgba(221, 221, 221, 0) rgba(221, 221, 221, 0) #ddd;
            border-width: 10px;  
            top: 20px;
            right: -19px;
        }
        #com-atlassian-confluence #inline-dialog-notifications-miniview #arrow-notifications-miniview
        {
            display:none;
        }
	

</style>



    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78446365-2', 'auto');
  ga('send', 'pageview');

</script>
<script type="text/javascript">//<![CDATA[
	var buyBeerImages = Array();
	buyBeerImages[0] = new Image(120, 120);
	buyBeerImages[0].src = "/confluence/fdfiles/small.png";
	buyBeerImages[1] = new Image(120, 120);
	buyBeerImages[1].src = "/confluence/fdfiles/big.png";
	buyBeerImages[2] = new Image(120, 120);
	buyBeerImages[2].src = "/confluence/fdfiles/lot.png";

	function switchBeerImage(e) {
		var selectElement = AJS.$(e.target);
		var imgIdx = parseInt(selectElement.find(":selected").attr('data-beer-index'));
		var theForm = selectElement.closest("form");
		theForm.find("input[type='image']").attr('src', buyBeerImages[imgIdx].src);
	}
//]]>
</script>

    
                <link rel="canonical" href="https://www.itenlight.com/blog/2016/05/21/PostgreSQL+HA+with+pgpool-II+-+Part+4">
        <link rel="shortlink" href="https://www.itenlight.com/confluence/x/OwA5">
    <meta name="wikilink" content="[BLOG:/2016/05/21/PostgreSQL HA with pgpool-II - Part 4]">
    <meta name="page-version" content="34">


        

    
</head>

<body      id="com-atlassian-confluence" class="RefinedWikiTheme50 rw_version_5 view-blog-post aui-layout aui-theme-default confluence_5   lighter-editor   rw_body_gray rw_category_dd_theme_dark rw_popup_design_default   ">


        
            <div id='stp-licenseStatus-banner'></div>
    <ul id="assistive-skip-links" class="assistive">
    <li><a href="#rw_page_title">Skip to content</a></li>
    <li><a href="#rw_page_breadcrumbs">Skip to breadcrumbs</a></li>
    <li><a href="#rw_category_menu">Skip to header menu</a></li>
    <li><a href="#navigation">Skip to action menu</a></li>
    <li><a href="#rw_search_query">Skip to quick search</a></li>
</ul>


<div id="page">
<div id="full-height-container">
   
      <div id="header" style="display:none;"></div>
   
   <div id="header-precursor">
        <div class="cell">
            <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
                        </div>
    </div>
	
						
		
				



	






























































					<div 
	id="rw_side_menu_hidden_by_apache" style="display:none;visibility:hidden;"

	    	class=" rw_theme_dark"
	
	data-mode="open" 
	>
	<div id="rw_side_menu_handle" class="rw_handle"></div> 
    <div id="rw_side_menu_container">
		<ul>
	                                				
        
        
<li><a  id="login-link" href="/confluence/login.action?os_destination=%2Fdisplay%2FBLOG%2F2016%2F05%2F21%2FPostgreSQL%2BHA%2Bwith%2Bpgpool-II%2B-%2BPart%2B4" class="  user-item login-link "      title="" >
        Log in
</a></li>
                        				
        			
				
	    <li><a id="help-menu-link" href="#" title="Help" class="rw_has_dd rw_tooltip" data-dd="help-menu-link-dd" data-tooltip="Help">
      <span class="rw_item_icon aui-iconfont-help"></span>
    </a>
      <nav id="help-menu-link-dd" class="rw_side_menu_dd" data-owner="help-menu-link">
		              <div class="rw_section">
              <ul  id="help-menu-link-leading" class="section-leading first">
				                          
    
        
<li><a  id="confluence-help-link" href="https://docs.atlassian.com/confluence/docs-59/Getting+Help+And+Support" class="   "      title="Visit the Confluence documentation home"  target="_blank"
>
        Online Help
</a></li>
                                            
    
        
<li><a  id="keyboard-shortcuts-link" href="/confluence" class="   "      title="View available keyboard shortcuts" >
        Keyboard Shortcuts
</a></li>
                                            
    
        
<li><a  id="feed-builder-link" href="/confluence/dashboard/configurerssfeed.action" class="   "      title="Create your custom RSS feed." >
        Feed Builder
</a></li>
                                            
    
        
<li><a  id="whats-new-menu-link" href="https://confluence.atlassian.com/display/DOC/Confluence+5.9+Release+Notes" class="   "      title="" >
        What’s new
</a></li>
                                            
    
        
<li><a  id="gadget-directory-link" href="/confluence" class="  user-item administration-link "      title="Browse gadgets provided by Confluence" >
        Available Gadgets
</a></li>
                                            
    
        
<li><a  id="confluence-about-link" href="/confluence/aboutconfluencepage.action" class="   "      title="Get more information about Confluence" >
        About Confluence
</a></li>
                                  </ul>
            </div>
		        </nav>
    </li>
	
	    </ul>
		<ul>
			<li>	
				<a id="rw_search_popup_button" title="Search">
        			<span class="rw_item_icon rw_iconfont_search"></span>
        		</a>
			</li>
		</ul>	
	
    </div>
    <div class="rw_done_cover"></div> 
</div>
		
				
				



        



		<div id="rw_wrapper" class="rw_menu_layout_v2  rw_blog_space     rw_background_partial rw_effects_popup_shadow rw_header_theme_1row rw_header_height_space rw_category_menu_theme_traditional rw_content_menu_transparent rw_content_spaces_gray3 rw_content_menu_open ">

			<div id="rw_main">

								
									    <div id="rw_theme_header" class=" rw_corners_rounded rw_text_size_regular rw_logo_size_medium">

                
                    <div class="rw_row_1 rw_header_row">

                                                    <div class="rw_header_left rw_has_logo ">
                        
		                        	




<div id="rw_logo_container" class="  ">
		<a href="/">
		<img src="/confluence/download/attachments/327682/atl.site.logo?version=2&amp;modificationDate=1465094613765&amp;api=v2" />
	</a>

		
		</div>
                    </div>
                

                                <div class="rw_header_center">	
		
		
		<div id="rw_category_menu" 
		class=" rw_version_3 rw_theme_traditional  rw_corners_rounded rw_text_size_regular  "
		>

					<div id="rw_category_menu_scroll_container">
					<ul class="rw_category_items">
				                           </ul>
					</div><!-- # rw_category_menu_scroll_container -->
			</div>		

		<div id="rw_category_menu_parameters" style="display:none;"
		 data-drop-down-content-size="medium"
	  >
	
						<div id="rw_category_dd_disabled">false</div>
		<div id="rw_category_dd_layout">dynamic_column</div>
		<div id="rw_sub_category_collapsed">false</div>
		<div id="rw_show_category_logo">false</div>
		<div id="rw_exclude_archived_spaces">false</div>
		<div id="rw_show_space_logo">false</div>
		<div id="rw_show_space_icon">false</div>
		<div id="rw_min_column_width">340</div>
		<div id="rw_active_category_key"></div>
		<div id="rw_is_dashboard"></div>
		<div id="rw_manual_permissions">false</div>
		<div id="rw_disable_category_dashboards">false</div>
		<div id="rw_disable_subcategory_dashboards">false</div>
		          <div id="rw_version">3</div>
			  	<div id="rw_dashboard_title"></div>
	</div>

</div>

                                <div class="rw_header_right ">
                                           
                    	<div id="rw_search_container">
		<div id="rw_search" class="rw_search">
			
						<form style="width:0px; height:0px; overflow:hidden; "><input type="text" name="hack" onfocus="this.blur()" /></form>
			    
			<form id="rw_search_form" class="rw_search_form" method="get" action="/confluence/dosearchsite.action">
		   		<label for="rw_search_query" class="assistive">Quick Search</label>
				<input class="rw_search_query" id="rw_search_query" type="text" accessKey="search-pages-action.accesskey" autocomplete="off" name="queryString" size="25" />
		    
		   		<div style="clear:both;"></div>
		        <div id="rw_search_result_container" class="rw_search_result_container rw_corners" style="display:none;">
		        	
		        </div>
		
		        <fieldset class="hidden parameters">
		            <input type="hidden" id="quickNavEnabled" value="true" />
		            		        </fieldset>
		    </form>	
	    </div>
	</div>

                                        	
	
	                </div>

            </div>
            </div>

<div id="rw_theme_content" class="">
<div style="clear:both;"></div>

	
			
		
			<div style="clear:both;"></div>


									

		    <div id="main" >

													

			


				
		

<div id="rw_menu_bar_wrapper" class="" >
		
	
	<div id="rw_menu_bar" class="rw_corners" >

				          <div class="rw_create_button_container"><table><tr><td style="vertical-align:top;"><a href="https://twitter.com/share" class="twitter-share-button"></a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></td><td style="vertical-align:top;padding-left:10px;"><div class="fb-like" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div></td><td style="vertical-align:top;padding-left:10px;"><g:plusone size="medium"></g:plusone></td></tr></table></div><div class="rw_create_button_container_hidden_by_apache" style="display:none;visibility:hidden;"><a class="aui-button aui-button-primary rw_create_blogpost_button" href="/confluence/pages/createblogpost.action?spaceKey=BLOG"><span>Create blog post</span></a></div>
		

				
										
				

								
				
			



<div id="rw_space_nav" class="rw_corners">

    <div class="rw_item_content ">
                <a
            title="Blog"
                            href="/blog"
                                >

            Blog
                                                                </a>
    </div>

    
            <div id="rw_space_menu_button_hidden_by_apache" style="display:none;visibility:hidden;">
            <span class="rw_icon rw_iconfont_top_menu"></span>
        </div>
                    
			
		
        <div id="browse-space-menu" style="display:none;" >

									<ul>
			  	<h3 class="rw_section_title">Space Tools</h3>

				
									<li>
						
																									
						<a title="Overview" href="/confluence/spaces/viewspacesummary.action?key=BLOG">
															<span class="rw_item_icon rw_iconfont_text"></span>
														<span class="rw_item_content">Overview</span>
						</a>

																	</li>
									<li>
						
																									
						<a title="Content Tools" href="/confluence/pages/reorderpages.action?key=BLOG">
															<span class="rw_item_icon rw_iconfont_tree"></span>
														<span class="rw_item_content">Content Tools</span>
						</a>

																	</li>
							</ul>

		</div>
	            </div>

		

	</div> <!-- #rw_menu_bar -->
</div> <!-- #rw_menu_bar_wrapper -->
				

												
		
		        

								
					
											    <div class="rw_content_section blogpost view">
    <div id="rw_main_column" class="rw_has_right_column">
        <!--
          #rw_page_right is @deprecated @since RWOT 3.1 the id of this tag will be
          removed in future version of this theme. NOTE: The div-tag will remain
          it's just the ID which will be removed.

          id="rw_page_right"
          id="blogpost_container"
        -->
        <div class="rw_content">

            

                           


                <div class="rw_profile_pic">
            <a  class="userLogoLink" data-username="peske" href="    /confluence/display/~peske
">
               <img class="userLogo logo" src="/confluence/download/attachments/327691/user-avatar?version=1&amp;modificationDate=1462000142995&amp;api=v2"
               alt="User icon: peske" title="peske">
           </a>        </div>
        <div id="main-header" class="rw_has_profile_pic">

                <div class="rw_page_buttons">
    <a id="rw_open_fullscreen" title="Open page in fullscreen ( Type 'F', shift + f )" class="aui-button aui-button-subtle" href="#">
        <span>
			<span class="rw_icon rw_iconfont_fullscreen"></span>
		</span>
    </a>
    <a id="rw_close_fullscreen" style="display:none;" class="aui-button aui-button-subtle" title="Exit fullscreen mode ( Type 'esc' )">
        <span>
            <span class="rw_icon rw_iconfont_minimize"></span>
        </span>
    </a>
</div>

                

								

                
    <div id="navigation_hidden_by_apache" style="display:none;visibility:hidden;" class="content-navigation view">
                    <ul class="ajs-menu-bar">
                                            
        <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action aui-dropdown2-trigger-arrowless aui-button aui-button-subtle ajs-menu-title aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="action-menu" data-container="#navigation">
            <span>
                                    <span class="aui-icon aui-icon-small aui-iconfont-more"></span>
                                
            </span>
        </a>         <div id="action-menu" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                            <div class="aui-dropdown2-section">
                    <ul  id="action-menu-primary"                         class="section-primary first">
                                                    <li>

    
        
                                            
    
    
    <a  id="view-attachments-link" href="/confluence/pages/viewpageattachments.action?pageId=3735611" rel="nofollow" class="action-view-attachments"  accessKey="t"  title="View Attachments">
                <span>
                        A<u>t</u>tachments (0)
        </span>    </a>
</li>
                                                <li>

    
        
                                            
    
    
    <a  id="action-view-history-link" href="/confluence/pages/viewpreviousversions.action?pageId=3735611" rel="nofollow" class="action-view-history"   title="">
                <span>
                        Page History
        </span>    </a>
</li>
                                        </ul>
                </div>
                            <div class="aui-dropdown2-section">
                    <ul  id="action-menu-secondary"                         class="section-secondary">
                                                    <li>

    
        
                                            
    
    
    <a  id="view-page-info-link" href="/confluence/pages/viewinfo.action?pageId=3735611" rel="nofollow" class="action-view-info"   title="">
                <span>
                        Page Information
        </span>    </a>
</li>
                                                <li>

    
        
                                            
    
    
    <a  id="view-resolved-comments" href="/confluence" rel="nofollow" class=""   title="">
                <span>
                        Resolved comments
        </span>    </a>
</li>
                                                <li>

    
        
                                            
    
    
    <a  id="link-to-page-link" href="/confluence/pages/viewinfo.action?pageId=3735611" rel="nofollow" class=""   title="Link to this Page">
                <span>
                        Link to this Page…
        </span>    </a>
</li>
                                                <li>

    
        
                                            
    
    
    <a  id="action-view-source-link" href="/confluence/plugins/viewsource/viewpagesrc.action?pageId=3735611" rel="nofollow" class="action-view-source popup-link"   title="">
                <span>
                        View Source
        </span>    </a>
</li>
                                                <li>

    
        
                                            
    
    
    <a  id="action-export-pdf-link" href="/confluence/spaces/flyingpdf/pdfpageexport.action?pageId=3735611" rel="nofollow" class=""   title="">
                <span>
                        Export to PDF
        </span>    </a>
</li>
                                        </ul>
                </div>
                    </div>
    </li>
            </ul>
    </div>

        


         <div id="title-heading" class="pagetitle with-breadcrumbs">

                            <div id="breadcrumb-section_hidden_by_apache" style="display:none;visibility:hidden;">
                    
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first" >
                        
                            <span class=""><a href="/confluence/pages/viewrecentblogposts.action?key=BLOG">Blog</a></span>
                                                                    
                        
        <li>
                        
                            <span class="">2016</span>
                                                                    
                        
        <li>
                        
                            <span class=""><a href="/blog/2016/05">May</a></span>
                                                                    
                        
        <li>
                        
                            <span class="">21</span>
                                                    </ol>


                </div>
            
            
		<a href="#page-banner-end" class="assistive">Skip to end of banner</a>
<div id="page-banner-start" class="assistive"></div>

			        
            <div id="page-metadata-banner"><ul class="banner"><li id="system-content-items" class="noprint"><a href="" title="Unrestricted" id="content-metadata-page-restrictions-hidden" class="hidden"></a></li><li class="page-metadata-item noprint has-button"  id="content-metadata-jira-wrapper"><a href="" title="" id="content-metadata-jira" class="aui-button aui-button-subtle content-metadata-jira tipsy-disabled hidden"><span>JIRA links</span></a></li></ul></div>
    		

<a href="#page-banner-start" class="assistive">Go to start of banner</a>
<div id="page-banner-end" class="assistive"></div>
	


                            <h1 id="title-text" class="with-breadcrumbs">
                                                        <a href="/blog/2016/05/21/PostgreSQL+HA+with+pgpool-II+-+Part+4">PostgreSQL HA with pgpool-II - Part 4</a>
                                        </h1>
                    </div>
    </div><!-- \#main-header -->



            
            
    
    

        




            
    <!-- this is blogpost.vmd -->










	



    
    
        
    
    
                    
    

	                    
    
	



	

		

		

		

	
                	



<div id="action-messages">
                        </div>






	
		                    
    
    










<div class="rw_blogpost_content">

		
						        	<div style="display:none;visibility:hidden;">
				  <a href="#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
            <li class="page-metadata-modification-info">
                
        
    
        
    
        
            
            Created by <span class='author'>     <a href="    /confluence/display/~peske
"
                       class="url fn confluence-userlink" data-username="peske"
                            >Aleksandar Pesic</a></span>, last modified on <a class='last-modified' title='Show changes' href='/confluence/pages/diffpagesbyversion.action?pageId=3735611&amp;selectedPageVersions=33&amp;selectedPageVersions=34'>Jun 13, 2016</a>
                </li>
        </ul>
    </div>


<a href="#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>
	  </div>
	
		  
	
	

		

	
	<div style="clear:both;"></div>	
	<div id="content" class="blogpost view">
				<article>
			<div id="main-content" class="wiki-content">
							  	<style></style>
			                                                    
        <div class="wiki-content">
            <!-- SEOManager:keywords=postgresql, pgpool, high-availability, replication
composedTitle=PostgreSQL HA with pgpool-II - Part 4
author=peske
description=If you want to implement PostgreSQL high-availability cluster by using pgpool-II here&amp;apos;s complete, comprehensive tutorial for you.
title=PostgreSQL HA with pgpool-II - Part 4
:SEOManager --><div class="confluence-information-macro confluence-information-macro-tip"><p class="title">Support by sharing!</p><span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>If you like the tutorial please share it with your friends. G+, Facebook and Twitter buttons are in the upper right corner of this page. <strong>Thanks!</strong></p></div></div><p>This is the fourth part of  the tutorial. Other parts are:</p><ul><li><a href="/blog/2016/05/18/PostgreSQL+HA+with+pgpool-II+-+Part+1">PostgreSQL HA with pgpool-II - Part 1</a></li><li><a href="/blog/2016/05/19/PostgreSQL+HA+with+pgpool-II+-+Part+2">PostgreSQL HA with pgpool-II - Part 2</a></li><li><a href="/blog/2016/05/23/PostgreSQL+HA+with+pgpool-II+-+Part+3">PostgreSQL HA with pgpool-II - Part 3</a></li><li><strong>PostgreSQL HA with pgpool-II - Part 4</strong></li><li><a href="/blog/2016/05/21/PostgreSQL+HA+with+pgpool-II+-+Part+5">PostgreSQL HA with pgpool-II - Part 5</a></li><li><a href="/blog/2016/05/25/PostgreSQL+HA+with+pgpool-II+-+Part+6">PostgreSQL HA with pgpool-II - Part 6</a></li></ul><p>If you haven't did so, I strongly suggest you to start <a href="/blog/2016/05/18/PostgreSQL+HA+with+pgpool-II+-+Part+1">from the first part</a> of this tutorial before continuing here, but again, it's your call.</p><p>This part deals with another painful thing: installing pgpool-II. The ultimate resource for this is <a class="external-link" href="http://www.pgpool.net/docs/latest/pgpool-en.html" rel="nofollow">pgpool-II manual</a>. Here I'll extract the essence, and present it in easier step-by-step way. Let's start.</p><h2 id="PostgreSQLHAwithpgpool-II-Part4-4.1.Installingpgpool-II">4.1. Installing pgpool-II</h2><p>For Ubuntu users (like I am), problems start immediately. The official Ubuntu repository is stucked with pgpool-II version 3.3, and again we want the latest (3.5 at the moment of this writing). Again we have a good reason to insist on the newest since pgpool-II versions 3.4 and 3.5 have introduced significant improvements in performances (as you can read <a class="external-link" href="http://pgpool.net/mediawiki/index.php/pgpool-II_3.5_features" rel="nofollow">here</a>). How to obtain the latest version? Well, if you are using CentOS - you're lucky - pgpool maintains <a class="external-link" href="http://pgpool.net/mediawiki/index.php/Yum_Repository" rel="nofollow">yum repository</a>. But if you are Ubuntu guy (as I am), you need to compile from source. I'm not sure why pgpool ignores Debian family and apt repository, but they do. Luckily the installation from source is not too hard. Pain comes later, with configuration, so CentOS guys don't celebrate too much. Also, even if you are using CentOS, read through the next section in order to sync with us, and to have understanding about files included in the install.</p><h3 id="PostgreSQLHAwithpgpool-II-Part4-4.1.1.InstallingfromSource">4.1.1. Installing from Source</h3><p>Let's start with installing packages that will be needed for compilation:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">apt-get update
apt-get install libpq-dev make</pre>
</div></div><p>Besides mentioned packages this will install all dependencies of course. We'll also need <code>postgresql-9.5-pgpool2</code> package, but if you followed previous part of the tutorial it is already installed.</p><p>The next thing to do is to download and extract source tarball:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence"># Download the tarball:
wget http://www.pgpool.net/download.php?f=pgpool-II-3.5.2.tar.gz -O pgpool-II-3.5.2.tar.gz
# Extract the tarball:
tar -xzf pgpool-II-3.5.2.tar.gz
# Delete the tarball once extracted:
rm pgpool-II-3.5.2.tar.gz
# cd to source directory:
cd pgpool-II-3.5.2</pre>
</div></div><p>After that we'll configure and compile the package. There are more configuration options, but I'll use only one that defines <em>installation directory</em>, and I'll set it to <code>/usr/share/pgpool2/3.5.2</code>. If you want you can change the installation directory to some other location (i.e. another good pick would be <code>/opt/pgpool2/3.5.2</code>). Still in source directory, execute the following:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence">./configure --prefix=/usr/share/pgpool2/3.5.2

make
make install</pre>
</div></div><p>This will compile and install binaries (and some other things) in the specified location. Next thing to do is to create and define <em>configuration directory</em>. Do the following:</p><ul><li>Pick and create configuration directory. To be consistent with PostgreSQL I like my configuration directory to be <code>/etc/pgpool2/3.5.2</code>, so I'll create it there.</li><li><p>Move content of <code>/usr/share/pgpool2/3.5.2/etc</code> directory to your new configuration directory. (Note that <code>/usr/share/pgpool2/3.5.2</code> used here is actually installation directory you've selected in compilation process.) Content that will be moved are actually example configuration files (<code>pcp.conf.sample</code> and few others). Example move command (do the same for all other files from the directory):</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">mv /usr/share/pgpool2/3.5.2/etc/pcp.conf.sample /etc/pgpool2/3.5.2/</pre>
</div></div><p>The files that need to be moved this way are: </p><ul><li><p><code>pcp.conf.sample</code></p></li><li><p><code>pgpool.conf.sample</code></p></li><li><p><code>pgpool.conf.sample-master-slave</code></p></li><li><p><code>pgpool.conf.sample-replication</code></p></li><li><p><code>pgpool.conf.sample-stream</code></p></li><li><p><code>pool_hba.conf.sample</code></p></li></ul></li><li><p>Copy, move, or link binary files from your installation directory to <code>/usr/sbin</code>. I prefer using symbolic links, but you can also move or copy the files. Here's an example for file <code>pcp_attach_node</code> (you should do the same for all other files):</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence"># Create symbolic link:
ln -s /usr/share/pgpool2/3.5.2/bin/pcp_attach_node /usr/sbin/pcp_attach_node
# OR move:
mv /usr/share/pgpool2/3.5.2/bin/pcp_attach_node /usr/sbin/
# OR copy:
cp /usr/share/pgpool2/3.5.2b/bin/pcp_attach_node /usr/sbin/</pre>
</div></div><p>The files that need to be linked / moved / copied this way are:</p></li><ul><li><p><code>pcp_attach_node</code></p></li><li><p><code>pcp_detach_node</code></p></li><li><p><code>pcp_node_count</code></p></li><li><p><code>pcp_node_info</code></p></li><li><p><code>pcp_pool_status</code></p></li><li><p><code>pcp_proc_count</code></p></li><li><p><code>pcp_proc_info</code></p></li><li><p><code>pcp_promote_node</code></p></li><li><p><code>pcp_recovery_node</code></p></li><li><p><code>pcp_stop_pgpool</code></p></li><li><p><code>pcp_watchdog_info</code></p></li><li><p><code>pg_md5</code></p></li><li><p><code>pgpool</code></p></li></ul></ul><div><p> </p><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Note for CentOS (yum) users</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>If you are CentOS, and you've installed pgpool-II from yum repository, binary files should already be in /usr/sbin - please confirm that. Talking about configuration files - find where they are installed, but I don't recommend you to move them (pgpool service installed is probably configured for this existing location).</p></div></div><p> </p></div><h4 id="PostgreSQLHAwithpgpool-II-Part4-4.1.1.1.ExtensionsandSQLScripts">4.1.1.1. Extensions and SQL Scripts</h4><p>There's one thing I must admit before starting this section: not all scripts that we'll prepare here are needed in our scenario. You can check <a class="external-link" href="http://www.pgpool.net/docs/latest/pgpool-en.html#install_functions" rel="nofollow">original documentation</a> to see when these scripts and extensions are used. Nevertheless, for the sake of completeness of pgpool-II installation I will cover all the scripts here, and it won't hurt too much if you also do so.</p><p>pgpool-II comes with some PostgreSQL extensions and SQL scripts. You can find these in source directory (extracted from tarball), in <code>src/sql</code> subdirectory. Original pgpool-II documentation will instruct you to compile these, but you shouldn't do this - it is already covered by installed package <code>postgresql-9.5-pgpool2</code>. You only need to confirm that needed binaries (<code>pgpool_adm</code>, <code>pgpool-recovery</code>, and <code>pgpool-regclass</code>) are already available in PostgreSQL library (<code>/usr/lib/postgresql/9.5/lib</code>). But extensions and SQL scripts should be copied anyway.</p><p>Extensions should be copied to extension subdirectory of PostgreSQL installation directory (<code>/usr/share/postgresql/9.5/extension</code>). Each extension consists of two files: <code>*.control</code> and <code>*.sql</code>, and to copy an extension we need to copy both files. Besides extensions there are some SQL script files we would also want to copy, but we will copy them to sql subdirectory of PostgreSQL configuration directory (<code>/etc/postgresql/9.5/main/sql</code>). Again, both extensions and SQL script files are at the moment in <code>src/sql</code> subdirectory of source directory (extracted from tarball). So let's start copying:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence" data-theme="Confluence"># Create SQL scripts directory:
mkdir /etc/postgresql/9.5/main/sql
# Navigate to source directory:
cd ~/pgpool-II-3.5.2
# Navigate to src/sql subdirectory:
cd src/sql
# While there let&#39;s copy the first script file:
cp insert_lock.sql /etc/postgresql/9.5/main/sql/
# Navigate to pgpool_adm (the first extension) subdirectory:
cd pgpool_adm
# Let&#39;s copy pgpool_adm extension:
cp pgpool_adm.control /usr/share/postgresql/9.5/extension/
cp pgpool_adm--1.0.sql /usr/share/postgresql/9.5/extension/
# While there let&#39;s copy SQL script file also (note that I&#39;m changing extension of the file also):
cp pgpool_adm.sql.in /etc/postgresql/9.5/main/sql/pgpool_adm.sql
# Navigate up in order to select another extension:
cd ..
# Navigate to pgpool-recovery (the next extension) subdirectory:
cd pgpool-recovery
# Let&#39;s copy pgpool-recovery extension:
cp pgpool_recovery.control /usr/share/postgresql/9.5/extension/
cp pgpool_recovery--1.1.sql /usr/share/postgresql/9.5/extension/
# While there let&#39;s copy SQL script files also (note that I&#39;m changing extension of the file also):
cp pgpool-recovery.sql.in /etc/postgresql/9.5/main/sql/pgpool-recovery.sql
cp uninstall_pgpool-recovery.sql /etc/postgresql/9.5/main/sql/
# Navigate up in order to select another extension:
cd ..
# Navigate to pgpool-regclass (the next extension) subdirectory:
cd pgpool-regclass
# Let&#39;s copy pgpool-regclass extension:
cp pgpool_regclass.control /usr/share/postgresql/9.5/extension/
cp pgpool_regclass--1.0.sql /usr/share/postgresql/9.5/extension/
# While there let&#39;s copy SQL script files also (note that I&#39;m changing extension of the file also):
cp pgpool-regclass.sql.in /etc/postgresql/9.5/main/sql/pgpool-regclass.sql
cp uninstall_pgpool-regclass.sql /etc/postgresql/9.5/main/sql/

# Navigate to your home directory and you can delete pgpool source directory since we&#39;ve copied everything we need:
cd
rm -r pgpool-II-3.5.2</pre>
</div></div><p>Now we need to change copied SQL script files. Basically we need to change <code>MODULE_PATHNAME</code> to the appropriate module path. Also we need to change $libdir with actual PostgreSQL library directory (<code>/usr/lib/postgresql/9.5/lib</code>). <code>MODULE_PATHNAME</code> is actually mentioned library path plus actual module name. As an example here I'll provide <code>pgpool-recovery.sql</code> before and after the change:</p><div class="code panel pdl" style="border-width: 1px;">
 <div class="codeHeader panelHeader pdl hide-border-bottom" style="border-bottom-width: 1px;">
  <b class=" code-title">pgpool-recovery.sql - before the change</b>
  <span class="collapse-source expand-control" style="display:none;"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Expand source</span></span>
  <span class="collapse-spinner-wrapper"></span>
 </div>
 <div class="codeContent panelContent pdl hide-toolbar"> 
  <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence; collapse: true" data-theme="Confluence">CREATE OR REPLACE FUNCTION pgpool_recovery(text, text, text, text)
RETURNS bool
AS 'MODULE_PATHNAME', 'pgpool_recovery'
LANGUAGE C STRICT;

CREATE OR REPLACE FUNCTION pgpool_remote_start(text, text)
RETURNS bool
AS 'MODULE_PATHNAME', 'pgpool_remote_start'
LANGUAGE C STRICT;

CREATE OR REPLACE FUNCTION pgpool_pgctl(text, text)
RETURNS bool
AS '$libdir/pgpool-recovery', 'pgpool_pgctl'
LANGUAGE C STRICT;

CREATE OR REPLACE FUNCTION pgpool_switch_xlog(text)
RETURNS text
AS 'MODULE_PATHNAME', 'pgpool_switch_xlog'
LANGUAGE C STRICT;</pre> 
 </div>
</div><div class="code panel pdl" style="border-width: 1px;">
 <div class="codeHeader panelHeader pdl hide-border-bottom" style="border-bottom-width: 1px;">
  <b class=" code-title">pgpool-recovery.sql - after the change</b>
  <span class="collapse-source expand-control" style="display:none;"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Expand source</span></span>
  <span class="collapse-spinner-wrapper"></span>
 </div>
 <div class="codeContent panelContent pdl hide-toolbar"> 
  <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence; collapse: true" data-theme="Confluence">CREATE OR REPLACE FUNCTION pgpool_recovery(text, text, text, text)
RETURNS bool
AS '/usr/lib/postgresql/9.5/lib/pgpool-recovery', 'pgpool_recovery'
LANGUAGE C STRICT;

CREATE OR REPLACE FUNCTION pgpool_remote_start(text, text)
RETURNS bool
AS '/usr/lib/postgresql/9.5/lib/pgpool-recovery', 'pgpool_remote_start'
LANGUAGE C STRICT;

CREATE OR REPLACE FUNCTION pgpool_pgctl(text, text)
RETURNS bool
AS '/usr/lib/postgresql/9.5/lib/pgpool-recovery', 'pgpool_pgctl'
LANGUAGE C STRICT;

CREATE OR REPLACE FUNCTION pgpool_switch_xlog(text)
RETURNS text
AS '/usr/lib/postgresql/9.5/lib/pgpool-recovery', 'pgpool_switch_xlog'
LANGUAGE C STRICT;</pre> 
 </div>
</div><p>You need to do the same for all other SQL script files (from <code>/etc/postgresql/9.5/main/sql</code>). As a hint I'll tell you that module name that is used as a replacement always corresponds to name of the file you are changing (i.e. while changing file <code>pgpool-recovery.sql</code> you'll use module name <code>pgpool-recovery</code>). Another important thing to check is if actual module exists in PostgreSQL library (<code>/usr/lib/postgresql/9.5/lib</code>).</p><p>Here I need to admit something: in some circumstances PostgreSQL is smart enough to automatically change <code>MODULE_PATHNAME</code> before executing the script. For example it happens while we are installing extensions, and thanks to that we don't need to change extension files also, although they also contain <code>MODULE_PATHNAME</code>. For example, <code>pgpool_recovery--1.1.sql</code> file we previously copied to extension directory also contains <code>MODULE_PATHNAME</code>, but we don't need to change it because PostgreSQL will do this automatically on execution. But with regular SQL script files I don't know how to accomplish this, and for this reason I've changed everything manually. Except a bit more work, there's no harm in doing that.</p><p>It's probably not necessary, but I like to have all directories and files in <code>/etc/postgresql</code> owned by postgres user, so I'll execute:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">chown postgres:postgres -R /etc/postgresql/9.5/main/sql</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Note for CentOS (yum) users</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>I really don't know if (and where) installing from yum package copies extensions and scripts, so please try to figure out what is where.</p></div></div><h4 id="PostgreSQLHAwithpgpool-II-Part4-4.1.1.2.ServiceScript">4.1.1.2. Service Script</h4><p>Of course we would like pgpool-II to run as service, so we need to create and register service script. I've created one by modifying one that gets installed when you install pgpool-II v3.3 package from the official Ubuntu repository. Here I'll provide this script, but you can change it if you want. Actually there are two parts of this script: default file which contains default configuration options, and the script itself. I'll provide both files here. Note that if you've used different directories, you need to adjust the files appropriately.</p><p>Defaults file:</p><div class="code panel pdl" style="border-width: 1px;">
 <div class="codeHeader panelHeader pdl hide-border-bottom" style="border-bottom-width: 1px;">
  <b class=" code-title">/etc/default/pgpool2</b>
  <span class="collapse-source expand-control" style="display:none;"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Expand source</span></span>
  <span class="collapse-spinner-wrapper"></span>
 </div>
 <div class="codeContent panelContent pdl hide-toolbar"> 
  <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence; collapse: true" data-theme="Confluence"># Defaults for pgpool initscript
# sourced by /etc/init.d/pgpool2

# set to &quot;yes&quot; if you want to enable debugging messages to the log
PGPOOL_LOG_DEBUG=no

# config file
PGPOOL_CONFIG_FILE=/etc/pgpool2/3.5.2/pgpool.conf

# hba file
PGPOOL_HBA_CONFIG_FILE=/etc/pgpool2/3.5.2/pool_hba.conf

# pcp config file
PGPOOL_PCP_CONFIG_FILE=/etc/pgpool2/3.5.2/pcp.conf

# PID file. Must be the same as defined in pgpool.conf (pid_file_name)
PGPOOL_PID_FILE=/var/run/postgresql/pgpool.pid</pre> 
 </div>
</div><p>Service script:</p><div class="code panel pdl" style="border-width: 1px;">
 <div class="codeHeader panelHeader pdl hide-border-bottom" style="border-bottom-width: 1px;">
  <b class=" code-title">/etc/init.d/pgpool2</b>
  <span class="collapse-source expand-control" style="display:none;"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Expand source</span></span>
  <span class="collapse-spinner-wrapper"></span>
 </div>
 <div class="codeContent panelContent pdl hide-toolbar"> 
  <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: bash; gutter: false; theme: Confluence; collapse: true" data-theme="Confluence">#! /bin/sh

### BEGIN INIT INFO
# Provides:          pgpool2
# Required-Start:    $remote_fs $syslog
# Required-Stop:     $remote_fs $syslog
# Should-Start:      postgresql
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: start pgpool-II
# Description: pgpool-II is a connection pool server and replication
#              proxy for PostgreSQL.
### END INIT INFO


PATH=/sbin:/bin:/usr/sbin:/usr/bin
DAEMON=/usr/sbin/pgpool

test -x $DAEMON || exit 5

# Include pgpool defaults if available
if [ -f /etc/default/pgpool2 ] ; then
	. /etc/default/pgpool2
fi

PIDFILE=${PGPOOL_PID_FILE:-/var/run/postgresql/pgpool.pid}

PGPOOL_CONFIG_FILE=${PGPOOL_CONFIG_FILE:-/etc/pgpool2/3.5.2/pgpool.conf}
if [ ! -f $PGPOOL_CONFIG_FILE ]; then
	echo &quot;Config file not found.&quot;
	log_failure_msg &quot;Config file not found.&quot;
	exit 1
fi

if [ x&quot;$PGPOOL_LOG_DEBUG&quot; = x&quot;yes&quot; ]; then
	OPTS=&quot;-d -f $PGPOOL_CONFIG_FILE&quot;
else
	OPTS=&quot;-f $PGPOOL_CONFIG_FILE&quot;
fi

PGPOOL_PCP_CONFIG_FILE=${PGPOOL_PCP_CONFIG_FILE:-/etc/pgpool2/3.5.2/pcp.conf}
if [ -f $PGPOOL_PCP_CONFIG_FILE ]; then
	OPTS=&quot;$OPTS -F $PGPOOL_PCP_CONFIG_FILE&quot;
fi

STOPOPTS=$OPTS

PGPOOL_HBA_CONFIG_FILE=${PGPOOL_HBA_CONFIG_FILE:-/etc/pgpool2/3.5.2/pool_hba.conf}
if [ -f $PGPOOL_HBA_CONFIG_FILE ]; then
	OPTS=&quot;$OPTS -a $PGPOOL_HBA_CONFIG_FILE&quot;
fi

. /lib/lsb/init-functions


is_running() {
	pidofproc -p $PIDFILE $DAEMON &gt;/dev/null
}


d_start() {

	if ! test -d /var/run/postgresql; then
		install -d -m 2775 -o postgres -g postgres /var/run/postgresql
	fi

	if ! test -d /var/log/pgpool; then
		install -d -m 2775 -o postgres -g postgres /var/log/pgpool
	fi

	if is_running; then
		:
	else
		echo &quot;FD - Starting pgpool-II by executing:&quot;
		echo &quot;$DAEMON -n $OPTS &gt;&gt; /var/log/pgpool/pgpool.log 2&gt;&amp;1 &amp;&quot;
		su -c &quot;$DAEMON -n $OPTS &gt;&gt; /var/log/pgpool/pgpool.log 2&gt;&amp;1 &amp;&quot; - postgres
	fi
}


d_stop() {
	echo &quot;FD - Starting pgpool-II by executing:&quot;
	echo &quot;$DAEMON $STOPOPTS -m fast stop&quot;
	su -c &quot;$DAEMON $STOPOPTS -m fast stop&quot; - postgres
}

d_reload() {
	echo &quot;FD - Reloading pgpool-II by executing:&quot;
	echo &quot;$DAEMON $OPTS reload&quot;
	su -c &quot;$DAEMON $OPTS reload&quot; - postgres
}

case &quot;$1&quot; in
    start)
		log_daemon_msg &quot;Starting pgpool-II&quot; pgpool
		d_start
		log_end_msg $?
		;;
    stop)
		log_daemon_msg &quot;Stopping pgpool-II&quot; pgpool
		d_stop
		log_end_msg $?
		;;
    status)
		is_running
		status=$?
		if [ $status -eq 0 ]; then
			log_success_msg &quot;pgpool-II is running.&quot;
		else
			log_failure_msg &quot;pgpool-II is not running.&quot;
		fi
		exit $status
		;;
    restart|force-reload)
		log_daemon_msg &quot;Restarting pgpool-II&quot; pgpool
		d_stop &amp;&amp; sleep 1 &amp;&amp; d_start
		log_end_msg $?
		;;
    try-restart)
		if $0 status &gt;/dev/null; then
			$0 restart
		else
			exit 0
		fi
		;;
    reload)
    	log_daemon_msg &quot;Reloading pgpool-II&quot; pgpool
		d_reload
		log_end_msg $?
		;;
    *)
		log_failure_msg &quot;Usage: $0 {start|stop|status|restart|try-restart|reload|force-reload}&quot;
		exit 2
		;;
esac</pre> 
 </div>
</div><p>Now we can register the service by executing:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">update-rc.d pgpool2 defaults</pre>
</div></div><p>But since we haven't configured pgpool-II yet, let's temporary disable the service:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false; theme: Confluence" data-theme="Confluence">update-rc.d pgpool2 disable</pre>
</div></div><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>You've might noticed in the previous script that I've decided to run pgpool-II service as postgres user.<span> I've done so because I believe that it'll make my life easier later since a lot of scripts need to be run as postgres user. Nevertheless, if you install pgpool-II from package you'll see that the original script also runs the service this way.</span></p></div></div><div class="confluence-information-macro confluence-information-macro-information"><p class="title">Note for CentOS (yum) users</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>If you've installed pgpool-II from package, chances are that service script is already installed - please check.</p></div></div><h2 id="PostgreSQLHAwithpgpool-II-Part4-WheretoGoNext?">Where to Go Next?</h2><p>I'm getting tired of this. Hopefully we'll get HA in the next part - <a href="/blog/2016/05/21/PostgreSQL+HA+with+pgpool-II+-+Part+5">PostgreSQL HA with pgpool-II - Part 5</a>. (I've already told that I'm going with this tutorial and my implementation in parallel, so I still don't have HA up and running.)</p><p>

<script type="text/javascript">//<![CDATA[

	var fd_disqus_use=true;
	var disqus_identifier='$paramThreadIdentifier';
	var disqus_shortname='fatdragon';
	var disqus_url='https://www.itenlight.com/blog/2016/05/21/PostgreSQL+HA+with+pgpool-II+-+Part+4';

//]]>
</script></p>
        </div>

                
    
    
    
			</div>
		</article>
	</div>
			
	<div style="clear:both;"></div>
	
</div>


<div id="rw_blogpost_nav">

  			<div id="rw_blogpost_id" style="display:none;">3735611</div>
	</div>

	
<div class="rw_blogpost_share">
	
		<div id="rw_share_navigation"></div>
    
		<a id="rw_blogpost_permalink" class="aui-button">
		<span class="rw_link">
			Link to this page
		</span>
	</a>

        </div>


<div style="clear:both;"></div>	



			    
    



<div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="3735611" entitytype="blogpost">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
                    
        <li class="aui-label " data-label-id="3866625"><a class="aui-label-split-main" href="/confluence/label/BLOG/postgresql" rel="tag">postgresql</a></li><li class="aui-label " data-label-id="3866626"><a class="aui-label-split-main" href="/confluence/label/BLOG/pgpool2" rel="tag">pgpool2</a></li><li class="aui-label " data-label-id="3866627"><a class="aui-label-split-main" href="/confluence/label/BLOG/db" rel="tag">db</a></li><li class="aui-label " data-label-id="3866628"><a class="aui-label-split-main" href="/confluence/label/BLOG/ha" rel="tag">ha</a></li>
            </ul>

    </div>
</div>
</div>
	   
		    




            
        

<div class="hidden parameters">
    <input type="hidden" id="pageTitle" value="/2016/05/21/PostgreSQL HA with pgpool-II - Part 4">
</div>







                        
    
<div id="comments-section" class="pageSection group">
        
    



</div>
        






	<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://www.itenlight.com/blog/2016/05/21/PostgreSQL+HA+with+pgpool-II+-+Part+4"
    dc:identifier="https://www.itenlight.com/blog/2016/05/21/PostgreSQL+HA+with+pgpool-II+-+Part+4"
    dc:title="PostgreSQL HA with pgpool-II - Part 4"
    trackback:ping="https://www.itenlight.com/confluence/rpc/trackback/3735611"/>
</rdf:RDF>
-->
	

		    

	





    
	

    
    
    
	

    







    




    
    

    
    
    

    

        



        </div><!-- .rw_content -->
    </div><!-- #rw_main_column -->

        <div id="rw_right_column" class="rw_visibility_hidden">
        <div>            
  			<div id="rw_blogpost_calendar" class="rw_sidebar_section rw_corners">
				<div> 										<div id="rw_blog_calendar_wrapper" >
	<div id="rw_blog_calendar">
	</div>
	
						<div id="rw_blogpost_id" style="display:none;">3735611</div>
		<div id="rw_space_key" style="display:none;">BLOG</div>
		</div>
				</div>
		</div>
	
        </div>
    </div>
    <div class="rw_clear"></div>
</div><!-- #content -->
										<script>
						// Now we can show the sidebar..
						$('#rw_left_column').removeClass('rw_visibility_hidden');
						$('#rw_right_column').removeClass('rw_visibility_hidden');
					</script>
								
		        <div style="clear:both;"></div>
		    </div><!-- \#main -->
	
	
		
				</div>





	<div
		id="rw_footer_wrapper"
		
					        	class="rw_theme_dark"
				>
    	<div id="rw_footer_container">
			
									
							<div id="rw_footer_content">
				  	<p>Powered by <a href="http://www.atlassian.com/software/confluence" class="external-link" rel="nofollow">Atlassian Confluence</a> 5.9.10, themed by <a href="http://www.refinedwiki.com" class="external-link" rel="nofollow">RefinedTheme</a> 5.0.9</p>
				</div>
			    	</div>
	</div>

						


                                
            	
	    

						<div class="rw_bg_shadow">
    <div class="rw_shadow_container">
        <div class="rw_shadow_left"></div>
        <div class="rw_shadow_top"></div>
        <div class="rw_shadow_right"></div>
    </div>
</div>

			</div> <!-- rw_main -->

						

                <div class="rw_background_section_general
                                                                                "
        ></div>
    
                <div class="rw_background_section_background1
                                                    "
        ></div>
    

<div id='rw_popup_bg' style='display:none;'></div>

			
		</div><!-- rw_wrapper -->
		
	
		
		
	
			
	
	<div id="fd_buy_me_a_beer" style="display:none;visibility:hidden;">
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="RFGX5T23HR96G">
<input type="hidden" name="on0" value="Size">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="image_url" value="https://www.itenlight.com/confluence/fdfiles/black190.png">
<input type="hidden" name="no_shipping" value="1">
<input type="hidden" name="return" value="https://www.itenlight.com/confluence/pages/viewpage.action?pageId=5079104">
<input type="hidden" name="cancel_return" value="https://www.itenlight.com/confluence/pages/viewpage.action?pageId=5079106">
<table style="border:none;" class="fd_remove_class">
	<tr class="fd_remove_class">
		<td rowspan="2" style="padding-right:10px;" valign="middle" class="fd_remove_class">
			<strong>Want to PayPal me a beer?</strong>
		</td>
		<td style="width:1%;padding-right:6px;" valign="middle" class="fd_remove_class">
			<select name="os0" onchange="switchBeerImage(event);">
				<option value="Small" data-beer-index="0" selected>Small $2.00</option>
				<option value="Big" data-beer-index="1">Big $5.00</option>
				<option value="A lot!" data-beer-index="2">A lot! $10.00</option>
			</select> 
		</td>
	</tr>
	<tr class="fd_remove_class">
		<td style="width:1%;" valign="middle" class="fd_remove_class">
			<input type="image" src="/confluence/fdfiles/small.png" border="0" name="submit" alt="Pay with PayPal and let them to get a sip...">
		</td>
	</tr>
</table>
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
</div>
<script type="text/javascript">//<![CDATA[

    AJS.toInit(function(){

	AJS.$(".fd_remove_class").removeClass();

    	var byMeABeerDiv = AJS.$("#fd_buy_me_a_beer");
    	var byMeABeerContainer = AJS.$("#rw_blogpost_calendar");

    	if (byMeABeerDiv.length && byMeABeerContainer.length) {
    		byMeABeerContainer.prepend(byMeABeerDiv);
    		byMeABeerDiv.show();
    		byMeABeerDiv.css("visibility", "visible");
    	} 

    });

//]]>
</script>

<script type="text/javascript">//<![CDATA[

AJS.toInit(function(){

	if (typeof fd_disqus_use !== typeof undefined && fd_disqus_use == true && AJS.$('#comments-section')){

		if (typeof disqus_identifier === typeof undefined || disqus_identifier == '' || disqus_identifier == '$paramThreadIdentifier')
			disqus_identifier = 'itenlight_id_' + AJS.params.pageId;
		var disqus_config = function () {
			this.page.url=disqus_url;
			this.page.identifier=disqus_identifier;
		};
		
		// replace the comments section  
		AJS.$('#comments-section').after('<div id="disqus_thread"></div>').remove();
  
		(function() { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');

			s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
		})();
	}

});

//]]>
</script>
<script id="dsq-count-scr" src="//fatdragon.disqus.com/count.js" async></script>
<script src="https://apis.google.com/js/platform.js" async defer></script>



</div><!-- \#full-height-container -->
</div><!-- \#page -->
</body>
</html>
